function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{Jit6:function(e,t,r){"use strict";r.r(t),r.d(t,"RequestModule",(function(){return Ce}));var n={};r.r(n),r.d(n,"loadRequestSuccess",(function(){return R})),r.d(n,"loadRequestFailure",(function(){return m})),r.d(n,"loadPageRequestSuccess",(function(){return v})),r.d(n,"loadPageRequestFailure",(function(){return O})),r.d(n,"updateRequestSuccess",(function(){return j})),r.d(n,"updateRequestFailure",(function(){return y})),r.d(n,"createRequestSuccess",(function(){return k})),r.d(n,"createRequestFailure",(function(){return M})),r.d(n,"deleteRequestSuccess",(function(){return L})),r.d(n,"deleteRequestFailure",(function(){return P})),r.d(n,"acceptRequestSuccess",(function(){return I})),r.d(n,"acceptRequestFailure",(function(){return C}));var s={};r.r(s),r.d(s,"loadRequest",(function(){return E})),r.d(s,"loadPageRequest",(function(){return S})),r.d(s,"setCurrrentRequest",(function(){return w})),r.d(s,"clearCurrrentRequest",(function(){return _})),r.d(s,"initCurrentRequest",(function(){return x})),r.d(s,"setDirty",(function(){return T})),r.d(s,"updateRequest",(function(){return z})),r.d(s,"createRequest",(function(){return F})),r.d(s,"deleteRequest",(function(){return A})),r.d(s,"acceptRequest",(function(){return $}));var i=r("iInd"),u=r("Yml6"),c=r("DQLy"),a=r("PCNd"),o=r("s7LF"),l=r("QEVK"),b=r("vkgz"),d=Object(c.o)("requests"),g=Object(c.q)(d,(function(e){return e.currentRequestId})),p=Object(c.q)(d,g,(function(e,t){return 0===t?{id:0,client_id:0,title:"",message:"",created_date:(new Date).toString(),accept_support_id:"0"}:t?e.requests.find((function(e){return e.id===t})):null})),f=Object(c.q)(d,(function(e){return e.requests})),q=Object(c.q)(d,(function(e){return e.totalRecords})),h=Object(c.q)(d,(function(e){return e.totalPage})),R=(Object(c.q)(d,(function(e){return e.error})),Object(c.n)("[Request API] Load Request Success",Object(c.s)())),m=Object(c.n)("[Request API] Load Request Fail",Object(c.s)()),v=Object(c.n)("[Request API] Load Page Request Success",Object(c.s)()),O=Object(c.n)("[Request API] Load Page Request Fail",Object(c.s)()),j=Object(c.n)("[Request Edit API] Update Request Success",Object(c.s)()),y=Object(c.n)("[Request Edit API] Update Request Fail",Object(c.s)()),k=Object(c.n)("[Request New API] Create Request Success",Object(c.s)()),M=Object(c.n)("[Request New API] Create Request Fail",Object(c.s)()),L=Object(c.n)("[Request List API] Delete Request Success",Object(c.s)()),P=Object(c.n)("[Request List API] Delete Request Fail",Object(c.s)()),I=Object(c.n)("[Request List API] Accept Request Success",Object(c.s)()),C=Object(c.n)("[Request List API] Accept Request Fail",Object(c.s)()),E=Object(c.n)("[Request List Page] Load Request"),S=Object(c.n)("[Request List Page] Load Page Request",Object(c.s)()),w=Object(c.n)("[Request List Page] Set Current Request",Object(c.s)()),_=Object(c.n)("[Request Edit Page] Clear Current Request"),x=Object(c.n)("[Request List Page] Initialize Current Request"),T=Object(c.n)("[Product Edit Page] Set Product Dirty",Object(c.s)()),z=Object(c.n)("[Request Edit Page] Update Request",Object(c.s)()),F=Object(c.n)("[Request New Page] Create Request",Object(c.s)()),A=Object(c.n)("[Request List Page] Delete Request",Object(c.s)()),$=Object(c.n)("[Request List Page] Accept Request",Object(c.s)()),U=r("8Y7J"),W=r("SVse");function N(e,t){if(1&e&&(U.Mb(0,"span",17),U.kc(1),U.Lb()),2&e){var r=U.Wb(2);U.zb(1),U.mc(" ",r.displayMessage.title," ")}}function D(e,t){if(1&e&&(U.Mb(0,"span",17),U.kc(1),U.Lb()),2&e){var r=U.Wb(2);U.zb(1),U.mc(" ",r.displayMessage.message," ")}}var V=function(e){return{"is-invalid":e}};function J(e,t){if(1&e){var r=U.Nb();U.Mb(0,"div",2),U.Mb(1,"div",3),U.kc(2),U.Lb(),U.Mb(3,"div",4),U.Mb(4,"form",5),U.Ub("ngSubmit",(function(){U.fc(r);var e=t.ngIf;return U.Wb().saveRequest(e)})),U.Mb(5,"fieldset"),U.Mb(6,"div",6),U.Mb(7,"label",7),U.kc(8,"Title"),U.Lb(),U.Mb(9,"div",8),U.Mb(10,"input",9),U.Ub("blur",(function(){return U.fc(r),U.Wb().blur()})),U.Lb(),U.ic(11,N,2,1,"span",10),U.Lb(),U.Lb(),U.Mb(12,"div",6),U.Mb(13,"label",11),U.kc(14,"Message"),U.Lb(),U.Mb(15,"div",8),U.Mb(16,"textarea",12),U.Ub("change",(function(){return U.fc(r),U.Wb().change()})),U.kc(17,"              "),U.Lb(),U.ic(18,D,2,1,"span",10),U.Lb(),U.Lb(),U.Mb(19,"div",13),U.Mb(20,"div",14),U.Mb(21,"span"),U.Mb(22,"button",15),U.kc(23," Save "),U.Lb(),U.Lb(),U.Mb(24,"span"),U.Mb(25,"button",16),U.Ub("click",(function(){return U.fc(r),U.Wb().cancelEdit()})),U.kc(26," Cancel "),U.Lb(),U.Lb(),U.Lb(),U.Lb(),U.Lb(),U.Lb(),U.Lb(),U.Lb()}if(2&e){var n=U.Wb();U.zb(2),U.mc(" ",n.pageTitle," "),U.zb(2),U.ac("formGroup",n.requestForm),U.zb(6),U.ac("ngClass",U.bc(7,V,n.displayMessage.title)),U.zb(1),U.ac("ngIf",n.displayMessage.title),U.zb(5),U.ac("ngClass",U.bc(9,V,n.displayMessage.message)),U.zb(2),U.ac("ngIf",n.displayMessage.message),U.zb(4),U.ac("disabled",!n.requestForm.valid||!n.requestForm.dirty)}}function G(e,t){if(1&e&&(U.Mb(0,"div",18),U.kc(1),U.Lb()),2&e){var r=t.ngIf;U.zb(1),U.mc(" Error: ",r,"\n")}}var Y,Q,X=((Y=function(){function e(t,r,n,s){_classCallCheck(this,e),this.route=t,this.router=r,this.fb=n,this.store=s,this.pageTitle="New Request",this.displayMessage={},this.validationMessages={title:{required:"Title is required.",minlength:"Title must be at least three characters.",maxlength:"Title cannot exceed 100 characters."},message:{required:"Message is required.",minlength:"Message must be at least three characters.",maxlength:"Message cannot exceed 5000 characters."}},this.genericValidator=new l.a(this.validationMessages)}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.requestId=Number(this.route.snapshot.paramMap.get("id")),this.requestForm=this.fb.group({title:["",[o.m.required,o.m.minLength(3),o.m.maxLength(100)]],message:["",[o.m.required,o.m.minLength(3),o.m.maxLength(5e3)]]}),this.request$=this.store.select(p).pipe(Object(b.a)((function(t){return e.displayProfile(t)}))),this.requestForm.valueChanges.subscribe((function(){return e.displayMessage=e.genericValidator.processMessages(e.requestForm)}))}},{key:"blur",value:function(){this.displayMessage=this.genericValidator.processMessages(this.requestForm)}},{key:"saveRequest",value:function(e){var t=this;if(this.requestForm.valid&&this.requestForm.dirty){var r=Object.assign(Object.assign({},e),this.requestForm.value);this.store.dispatch(0!==r.id&&null!==r.id?s.updateRequest({request:r}):s.createRequest({request:r})),this.requestForm.reset(),setTimeout((function(){t.router.navigate(["/request"])}),500)}}},{key:"displayProfile",value:function(e){e&&(this.requestForm.reset(),this.pageTitle=0===e.id?"New Request":"Edit Request:",this.requestForm.patchValue({title:e.title,message:e.message}))}},{key:"cancelEdit",value:function(){this.router.navigate(["/request"])}},{key:"change",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Y)(U.Jb(i.a),U.Jb(i.b),U.Jb(o.b),U.Jb(c.h))},Y.\u0275cmp=U.Db({type:Y,selectors:[["ng-component"]],decls:4,vars:6,consts:[["class","card",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"card"],[1,"card-header"],[1,"card-body"],["novalidate","",3,"formGroup","ngSubmit"],[1,"form-group","row"],["for","firstNameId",1,"col-md-3","col-form-label"],[1,"col-md-9"],["id","titleId","type","text","placeholder","Title (required)","formControlName","title",1,"form-control",3,"ngClass","blur"],["class","invalid-feedback",4,"ngIf"],["for","messageId",1,"col-md-3","col-form-label"],["id","messageId","placeholder","Message (required)","rows","3","formControlName","message",1,"form-control",3,"ngClass","change"],[1,"form-group"],[1,"col-md-10","col-md-offset-2"],["type","submit",1,"btn","btn-primary",2,"width","80px","margin-right","10px",3,"disabled"],["type","button",1,"btn","btn-light",2,"width","80px","margin-right","10px",3,"click"],[1,"invalid-feedback"],[1,"alert","alert-danger"]],template:function(e,t){1&e&&(U.ic(0,J,27,11,"div",0),U.Xb(1,"async"),U.ic(2,G,2,1,"div",1),U.Xb(3,"async")),2&e&&(U.ac("ngIf",U.Yb(1,2,t.request$)),U.zb(2),U.ac("ngIf",U.Yb(3,4,t.errorMessage$)))},directives:[W.l,o.n,o.h,o.e,o.a,o.g,o.c,W.j],pipes:[W.b],styles:[""]}),Y),B=r("lGQG"),H=r("Mb37"),K=r("z6cu"),Z=r("JIr8"),ee=r("lJxs"),te=r("IheW"),re=((Q=function(){function e(t,r){_classCallCheck(this,e),this.http=t,this.authService=r,this.requestUrl="http://cyberron.somee.com/api/request"}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"getRequest",value:function(){return this.http.post(this.requestUrl,{token:this.authService.appToken,user_id:this.authService.currentUserId}).pipe(Object(Z.a)(this.handleError))}},{key:"getRequestPage",value:function(e){return this.http.post(this.requestUrl,{token:this.authService.appToken,user_id:this.authService.currentUserId}).pipe(Object(ee.a)((function(t){var r=e.pageSize,n=e.page,s=isNaN(n)?0:+n,i=isNaN(r)?10:s+ +r;return i>t.length&&(i=s+(t.length-s)),{results:(t=t.filter((function(t){return t.title.toLowerCase().includes(e.filteredValue.toLowerCase())||t.message.toLowerCase().includes(e.filteredValue.toLowerCase())}))).slice(s,i),pageSize:e.pageSize,totalRecords:t.length}})),Object(Z.a)(this.handleError))}},{key:"updateRequest",value:function(e){return this.http.post(this.requestUrl+"/update",{id:e.id,token:this.authService.appToken,client_id:this.authService.currentUserId,title:e.title,message:e.message}).pipe(Object(Z.a)(this.handleError))}},{key:"createRequest",value:function(e){return this.http.post(this.requestUrl+"/create",{token:this.authService.appToken,client_id:this.authService.currentUserId,title:e.title,message:e.message}).pipe(Object(Z.a)(this.handleError))}},{key:"deleteRequest",value:function(e){return this.http.post(this.requestUrl+"/delete",{id:e.id,token:this.authService.appToken}).pipe(Object(Z.a)(this.handleError))}},{key:"acceptRequest",value:function(e){return console.log(e),this.http.post(this.requestUrl+"/accept",{request_id:e,user_id:this.authService.currentUserId,token:this.authService.appToken}).pipe(Object(Z.a)(this.handleError))}},{key:"handleError",value:function(e){var t;return t=e.error instanceof ErrorEvent?"An error occurred: "+e.error.message:"Backend returned code ".concat(e.status,": ").concat(e.body.error),console.error(e),Object(K.a)(t)}}]),e}()).\u0275fac=function(e){return new(e||Q)(U.Qb(te.a),U.Qb(B.a))},Q.\u0275prov=U.Fb({token:Q,factory:Q.\u0275fac,providedIn:"root"}),Q);function ne(e,t){if(1&e){var r=U.Nb();U.Mb(0,"a",6),U.Ub("click",(function(){U.fc(r);var e=U.Wb().$implicit;return U.Wb().onGoTo(e)}))("keyup.enter",(function(){U.fc(r);var e=U.Wb().$implicit;return U.Wb().onGoTo(e)})),U.kc(1),U.Lb()}if(2&e){var n=U.Wb().$implicit,s=U.Wb();U.Bb("current",n===s.current),U.Ab("aria-current",n===s.current?"page":null)("aria-label",n===s.current?"Current Page, Page "+n:"Go to Page "+n),U.zb(1),U.lc(n)}}function se(e,t){1&e&&(U.Mb(0,"a",7),U.kc(1," ... "),U.Lb())}function ie(e,t){if(1&e&&(U.Mb(0,"li"),U.ic(1,ne,2,5,"a",4),U.ic(2,se,2,0,"ng-template",null,5,U.jc),U.Lb()),2&e){var r=t.$implicit,n=U.ec(3);U.zb(1),U.ac("ngIf",-1!==r)("ngIfElse",n)}}var ue,ce=((ue=function(){function e(){_classCallCheck(this,e),this.current=0,this.total=0,this.goTo=new U.n,this.next=new U.n,this.previous=new U.n,this.pages=[]}return _createClass(e,[{key:"ngOnChanges",value:function(e){(e.current&&e.current.currentValue||e.total&&e.total.currentValue)&&(this.pages=this.getPages(this.current,this.total))}},{key:"onGoTo",value:function(e){this.goTo.emit(e)}},{key:"onNext",value:function(){this.next.emit(this.current)}},{key:"onPrevious",value:function(){this.previous.next(this.current)}},{key:"getPages",value:function(e,t){return t<=7?_toConsumableArray(Array(t).keys()).map((function(e){return++e})):e>5?e>=t-4?[1,-1,t-4,t-3,t-2,t-1,t]:[1,-1,e-1,e,e+1,-1,t]:[1,2,3,4,5,-1,t]}}]),e}()).\u0275fac=function(e){return new(e||ue)},ue.\u0275cmp=U.Db({type:ue,selectors:[["app-pagination"]],inputs:{current:"current",total:"total"},outputs:{goTo:"goTo",next:"next",previous:"previous"},features:[U.xb],decls:9,vars:5,consts:[["aria-label","Pagination"],["aria-label","Go To Previous Page",3,"disabled","click"],[4,"ngFor","ngForOf"],["aria-label","Go To Next Page",3,"disabled","click"],["class","internal","tabindex","0",3,"current","click","keyup.enter",4,"ngIf","ngIfElse"],["more",""],["tabindex","0",1,"internal",3,"click","keyup.enter"],[1,"more"]],template:function(e,t){1&e&&(U.Mb(0,"nav",0),U.Mb(1,"ul"),U.Mb(2,"li"),U.Mb(3,"button",1),U.Ub("click",(function(){return t.onPrevious()})),U.kc(4," Previous "),U.Lb(),U.Lb(),U.ic(5,ie,4,2,"li",2),U.Mb(6,"li"),U.Mb(7,"button",3),U.Ub("click",(function(){return t.onNext()})),U.kc(8," Next "),U.Lb(),U.Lb(),U.Lb(),U.Lb()),2&e&&(U.zb(3),U.ac("disabled",1===t.current),U.Ab("aria-disabled",1===t.current),U.zb(2),U.ac("ngForOf",t.pages),U.zb(2),U.ac("disabled",t.current===t.total),U.Ab("aria-disabled",t.current===t.total))},directives:[W.k,W.l],styles:["nav[_ngcontent-%COMP%]{align-items:center}nav[_ngcontent-%COMP%], ul[_ngcontent-%COMP%]{display:flex}ul[_ngcontent-%COMP%]{justify-content:flex-end;list-style:none;margin:0;padding:0}li[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;margin:0 4px}a[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{align-items:center}a[_ngcontent-%COMP%]{display:grid;justify-items:center;width:100%;cursor:pointer;width:38px;line-height:38px;border-radius:4px;text-align:center;font-size:18px}a.current[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:not(.more):hover{background-color:#007acc;color:#fff;font-weight:700}a.current[_ngcontent-%COMP%], a.more[_ngcontent-%COMP%]:hover{cursor:default;text-decoration:none}button[_ngcontent-%COMP%]{background-color:#e9ecef;border:none;cursor:pointer;display:grid;place-items:center;font-size:18px;border-radius:4px;color:#007acc;padding:8px 16px}button[disabled][_ngcontent-%COMP%]{cursor:default;color:#212529}button[_ngcontent-%COMP%]:not([disabled]):hover{background-color:#007acc;color:#fff;cursor:pointer;outline:none}"]}),ue),ae=["find"];function oe(e,t){if(1&e){var r=U.Nb();U.Mb(0,"div",12),U.Mb(1,"button",13),U.Ub("click",(function(){return U.fc(r),U.Wb().newRequest(0)})),U.kc(2,"Add Request"),U.Lb(),U.Lb()}}function le(e,t){if(1&e){var r=U.Nb();U.Mb(0,"td"),U.Mb(1,"div"),U.Mb(2,"button",13),U.Ub("click",(function(){U.fc(r);var e=U.Wb().$implicit;return U.Wb(2).storeCurrentRequest(null==e?null:e.id)})),U.kc(3,"Edit"),U.Lb(),U.Lb(),U.Lb()}}function be(e,t){if(1&e){var r=U.Nb();U.Mb(0,"td"),U.Mb(1,"div"),U.Mb(2,"button",13),U.Ub("click",(function(){U.fc(r);var e=U.Wb().$implicit;return U.Wb(2).deleteRequest(e)})),U.kc(3,"Delete"),U.Lb(),U.Lb(),U.Lb()}}function de(e,t){if(1&e){var r=U.Nb();U.Mb(0,"td",22),U.Mb(1,"div"),U.Mb(2,"button",13),U.Ub("click",(function(){U.fc(r);var e=U.Wb().$implicit;return U.Wb(2).acceptRequest(null==e?null:e.id)})),U.kc(3,"Accept"),U.Lb(),U.Lb(),U.Lb()}}function ge(e,t){if(1&e&&(U.Mb(0,"tr"),U.Mb(1,"td",25),U.kc(2),U.Lb(),U.Mb(3,"td"),U.kc(4),U.Lb(),U.Mb(5,"td"),U.kc(6),U.Lb(),U.Mb(7,"td"),U.kc(8),U.Xb(9,"date"),U.Lb(),U.Mb(10,"td"),U.kc(11),U.Lb(),U.ic(12,le,4,0,"td",26),U.ic(13,be,4,0,"td",26),U.ic(14,de,4,0,"td",27),U.Lb()),2&e){var r=t.$implicit,n=U.Wb(2);U.zb(2),U.lc(null==r?null:r.id),U.zb(2),U.lc(null==r?null:r.title),U.zb(2),U.lc(null==r?null:r.message),U.zb(2),U.lc(U.Zb(9,8,null==r?null:r.created_date,"short")),U.zb(3),U.lc(null==r?null:r.accept_support_id),U.zb(1),U.ac("ngIf","client"===n.userType&&""===(null==r?null:r.accept_support_id)),U.zb(1),U.ac("ngIf","client"===n.userType&&""===(null==r?null:r.accept_support_id)),U.zb(1),U.ac("ngIf","support"===n.userType&&""===(null==r?null:r.accept_support_id))}}function pe(e,t){1&e&&(U.Mb(0,"div",28),U.Mb(1,"span"),U.kc(2," No records found..."),U.Lb(),U.Lb())}function fe(e,t){if(1&e){var r=U.Nb();U.Mb(0,"div",14),U.Mb(1,"div",2),U.Mb(2,"div",15),U.Mb(3,"div",16),U.Mb(4,"span",17),U.kc(5,"Find:"),U.Lb(),U.Mb(6,"input",18,19),U.Ub("input",(function(e){return U.fc(r),U.Wb().changeInput(e.target)})),U.Lb(),U.Lb(),U.Lb(),U.Mb(8,"div",7),U.Mb(9,"table",20),U.Mb(10,"thead"),U.Mb(11,"tr"),U.Mb(12,"th",21),U.kc(13,"Id"),U.Lb(),U.Mb(14,"th",21),U.kc(15,"Title"),U.Lb(),U.Mb(16,"th",21),U.kc(17,"Message"),U.Lb(),U.Mb(18,"th",21),U.kc(19,"DateTime"),U.Lb(),U.Mb(20,"th",21),U.kc(21,"Accept By"),U.Lb(),U.Mb(22,"th",22),U.kc(23,"Action"),U.Lb(),U.Lb(),U.Lb(),U.Mb(24,"tbody"),U.ic(25,ge,15,11,"tr",23),U.Lb(),U.Lb(),U.ic(26,pe,3,0,"div",24),U.Lb(),U.Lb(),U.Lb()}if(2&e){var n=U.Wb();U.zb(25),U.ac("ngForOf",n.requests),U.zb(1),U.ac("ngIf",0===n.requests.length)}}function qe(e,t){if(1&e&&(U.Mb(0,"div",29),U.kc(1),U.Lb()),2&e){var r=U.Wb();U.zb(1),U.mc("\nError: ",r.errorMessage,"\n")}}var he,Re,me,ve,Oe=((Re=function(){function e(){_classCallCheck(this,e),this.deleteRequestEmit=new U.n,this.storeRequestEmit=new U.n,this.newRequestEmit=new U.n,this.acceptRequestEmit=new U.n,this.getRequestPageEmit=new U.n,this.pageChangedEmit=new U.n,this.goToEmit=new U.n,this.nextEmit=new U.n,this.previousEmit=new U.n,this.changeInputEmit=new U.n}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"deleteRequest",value:function(e){this.deleteRequestEmit.emit(e)}},{key:"storeCurrentRequest",value:function(e){this.storeRequestEmit.emit(e)}},{key:"newRequest",value:function(e){this.newRequestEmit.emit(e)}},{key:"acceptRequest",value:function(e){this.acceptRequestEmit.emit(e)}},{key:"pageChanged",value:function(e){this.pageChangedEmit.emit(e)}},{key:"getRequestPage",value:function(e){this.getRequestPageEmit.emit(e)}},{key:"goTo",value:function(e){this.goToEmit.emit(e)}},{key:"next",value:function(){this.nextEmit.emit()}},{key:"previous",value:function(){this.previousEmit.emit()}},{key:"changeInput",value:function(e){this.changeInputEmit.emit(e.value)}}]),e}()).\u0275fac=function(e){return new(e||Re)},Re.\u0275cmp=U.Db({type:Re,selectors:[["cc-request-list"]],viewQuery:function(e,t){var r;1&e&&U.nc(ae,!0),2&e&&U.dc(r=U.Vb())&&(t.find=r.first)},inputs:{requests:"requests",userType:"userType",errorMessage:"errorMessage",selectedRequest:"selectedRequest",current:"current",totalRecords:"totalRecords",totalPage:"totalPage",pageSize:"pageSize"},outputs:{deleteRequestEmit:"deleteRequestEmit",storeRequestEmit:"storeRequestEmit",newRequestEmit:"newRequestEmit",acceptRequestEmit:"acceptRequestEmit",getRequestPageEmit:"getRequestPageEmit",pageChangedEmit:"pageChangedEmit",goToEmit:"goToEmit",nextEmit:"nextEmit",previousEmit:"previousEmit",changeInputEmit:"changeInputEmit"},decls:15,vars:5,consts:[[1,"card"],[1,"card-header"],[1,"row"],[1,"col-md-6"],["class","col-md-6 d-flex flex-row-reverse",4,"ngIf"],["class","card-body",4,"ngIf"],[1,"card-footer"],[1,"col-md-12"],[3,"current","total","goTo","next","previous"],[1,"form-check","col-md-7"],[1,"col-md-4","text-right"],["class","alert alert-danger",4,"ngIf"],[1,"col-md-6","d-flex","flex-row-reverse"],[1,"btn","btn-primary",3,"click"],[1,"card-body"],[1,"col-md-4"],[1,"input-group","mb-3"],["id","inputGroup-sizing-default",1,"input-group-text"],["type","text","aria-label","Find","aria-describedby","inputGroup-sizing-default",1,"form-control",3,"input"],["find",""],[1,"table","table-striped","table-hover"],["scope","col"],["colspan","2"],[4,"ngFor","ngForOf"],["class","text-center no-records",4,"ngIf"],["scope","row"],[4,"ngIf"],["colspan","2",4,"ngIf"],[1,"text-center","no-records"],[1,"alert","alert-danger"]],template:function(e,t){1&e&&(U.Mb(0,"div",0),U.Mb(1,"div",1),U.Mb(2,"div",2),U.Mb(3,"div",3),U.Mb(4,"h4"),U.kc(5,"Request List"),U.Lb(),U.Lb(),U.ic(6,oe,3,0,"div",4),U.Lb(),U.Lb(),U.ic(7,fe,27,2,"div",5),U.Mb(8,"div",6),U.Mb(9,"div",2),U.Mb(10,"div",7),U.Mb(11,"app-pagination",8),U.Ub("goTo",(function(e){return t.goTo(e)}))("next",(function(){return t.next()}))("previous",(function(){return t.previous()})),U.Lb(),U.Lb(),U.Kb(12,"div",9),U.Kb(13,"div",10),U.Lb(),U.Lb(),U.Lb(),U.ic(14,qe,2,1,"div",11)),2&e&&(U.zb(6),U.ac("ngIf","client"===t.userType),U.zb(1),U.ac("ngIf",t.requests),U.zb(4),U.ac("current",t.current)("total",t.totalPage),U.zb(3),U.ac("ngIf",t.errorMessage))},directives:[W.l,ce,W.k],pipes:[W.e],styles:[".no-records[_ngcontent-%COMP%]{font-weight:400;font-size:18px}"]}),Re),je=((he=function(){function e(t,r,n,s,i){_classCallCheck(this,e),this.store=t,this.router=r,this.auth=n,this.logger=s,this.requestService=i,this.pageSize=10,this.current=1,this.filteredValue=""}return _createClass(e,[{key:"ngOnInit",value:function(){this.userType=this.auth.userType,this.store.dispatch(s.loadRequest()),this.getRequestPage(1),this.totalRecords$=this.store.select(q),this.totalPage$=this.store.select(h),this.requests$=this.store.select(f)}},{key:"deleteRequestBtn",value:function(e){this.store.dispatch(s.deleteRequest({request:e})),this.goTo(this.current)}},{key:"saveCurrentRequest",value:function(e){this.store.dispatch(s.setCurrrentRequest({currentRequestId:e})),this.goTo(this.current),this.router.navigate(["/request/"+e])}},{key:"newRequest",value:function(e){this.router.navigate(["/request/"+e])}},{key:"acceptRequest",value:function(e){this.store.dispatch(s.acceptRequest({id:e}))}},{key:"pageChanged",value:function(e){this.getRequestPage(e)}},{key:"getRequestPage",value:function(e){this.store.dispatch(s.loadPageRequest({page:(e-1)*this.pageSize,pageSize:this.pageSize,filteredValue:this.filteredValue}))}},{key:"goTo",value:function(e){this.current=e,this.getRequestPage(e)}},{key:"next",value:function(){this.current++,this.getRequestPage(this.current)}},{key:"previous",value:function(){this.current--,this.getRequestPage(this.current)}},{key:"changeInput",value:function(e){this.filteredValue=e,this.getRequestPage(1)}}]),e}()).\u0275fac=function(e){return new(e||he)(U.Jb(c.h),U.Jb(i.b),U.Jb(B.a),U.Jb(H.a),U.Jb(re))},he.\u0275cmp=U.Db({type:he,selectors:[["ng-component"]],decls:8,vars:18,consts:[[1,"row"],[1,"col-md-12"],[3,"requests","userType","selectedRequest","errorMessage","current","totalRecords","totalPage","pageSize","deleteRequestEmit","storeRequestEmit","newRequestEmit","acceptRequestEmit","getRequestPageEmit","pageChangedEmit","goToEmit","nextEmit","previousEmit","changeInputEmit"]],template:function(e,t){1&e&&(U.Mb(0,"div",0),U.Mb(1,"div",1),U.Mb(2,"cc-request-list",2),U.Ub("deleteRequestEmit",(function(e){return t.deleteRequestBtn(e)}))("storeRequestEmit",(function(e){return t.saveCurrentRequest(e)}))("newRequestEmit",(function(e){return t.newRequest(e)}))("acceptRequestEmit",(function(e){return t.acceptRequest(e)}))("getRequestPageEmit",(function(e){return t.getRequestPage(e)}))("pageChangedEmit",(function(e){return t.pageChanged(e)}))("goToEmit",(function(e){return t.goTo(e)}))("nextEmit",(function(){return t.next()}))("previousEmit",(function(){return t.previous()}))("changeInputEmit",(function(e){return t.changeInput(e)})),U.Xb(3,"async"),U.Xb(4,"async"),U.Xb(5,"async"),U.Xb(6,"async"),U.Xb(7,"async"),U.Lb(),U.Lb(),U.Lb()),2&e&&(U.zb(2),U.ac("requests",U.Yb(3,8,t.requests$))("userType",t.userType)("selectedRequest",U.Yb(4,10,t.selectedRequest$))("errorMessage",U.Yb(5,12,t.errorMessage$))("current",t.current)("totalRecords",U.Yb(6,14,t.totalRecords$))("totalPage",U.Yb(7,16,t.totalPage$))("pageSize",t.pageSize))},directives:[Oe],pipes:[W.b],encapsulation:2}),he),ye=r("LRne"),ke=r("5+tZ"),Me=r("bOdf"),Le=((me=_createClass((function e(t,r){var i=this;_classCallCheck(this,e),this.actions$=t,this.requestService=r,this.loadRequest$=Object(u.c)((function(){return i.actions$.pipe(Object(u.d)(s.loadRequest),Object(ke.a)((function(){return i.requestService.getRequest().pipe(Object(ee.a)((function(e){return n.loadRequestSuccess({requests:e})})),Object(Z.a)((function(e){return Object(ye.a)(n.loadRequestFailure({error:e}))})))})))})),this.loadPageRequest$=Object(u.c)((function(){return i.actions$.pipe(Object(u.d)(s.loadPageRequest),Object(ke.a)((function(e){return i.requestService.getRequestPage({page:e.page,pageSize:e.pageSize,filteredValue:e.filteredValue}).pipe(Object(ee.a)((function(e){return n.loadPageRequestSuccess({data:e})})),Object(Z.a)((function(e){return Object(ye.a)(n.loadPageRequestFailure({error:e}))})))})))})),this.updateRequest$=Object(u.c)((function(){return i.actions$.pipe(Object(u.d)(s.updateRequest),Object(Me.a)((function(e){return i.requestService.updateRequest(e.request).pipe(Object(ee.a)((function(e){return n.updateRequestSuccess({request:e})})),Object(Z.a)((function(e){return Object(ye.a)(n.updateRequestFailure({error:e}))})))})))})),this.createRequest$=Object(u.c)((function(){return i.actions$.pipe(Object(u.d)(s.createRequest),Object(Me.a)((function(e){return i.requestService.createRequest(e.request).pipe(Object(ee.a)((function(e){return n.createRequestSuccess({request:e})})),Object(Z.a)((function(e){return Object(ye.a)(n.createRequestFailure({error:e}))})))})))})),this.deleteRequest$=Object(u.c)((function(){return i.actions$.pipe(Object(u.d)(s.deleteRequest),Object(Me.a)((function(e){return i.requestService.deleteRequest(e.request).pipe(Object(ee.a)((function(e){return"failed"===e[0].status?n.deleteRequestFailure({error:e[0].message}):n.deleteRequestSuccess({request:e})})),Object(Z.a)((function(e){return Object(ye.a)(n.deleteRequestFailure({error:e}))})))})))})),this.acceptRequest$=Object(u.c)((function(){return i.actions$.pipe(Object(u.d)(s.acceptRequest),Object(Me.a)((function(e){return i.requestService.acceptRequest(e.id).pipe(Object(ee.a)((function(e){return n.acceptRequestSuccess({request:e})})),Object(Z.a)((function(e){return Object(ye.a)(n.acceptRequestFailure({error:e}))})))})))}))}))).\u0275fac=function(e){return new(e||me)(U.Qb(u.a),U.Qb(re))},me.\u0275prov=U.Fb({token:me,factory:me.\u0275fac,providedIn:"root"}),me),Pe=Object(c.p)({currentRequestId:null,isDirty:!1,totalRecords:0,totalPage:0,error:"",requests:[]},Object(c.r)(n.loadPageRequestSuccess,(function(e,t){return Object.assign(Object.assign({},e),{error:"",currentRequestId:0,totalRecords:t.data.totalRecords,totalPage:Math.ceil(t.data.totalRecords/t.data.pageSize),requests:t.data.results})})),Object(c.r)(n.loadPageRequestFailure,(function(e,t){return Object.assign(Object.assign({},e),{error:t.error,currentRequestId:0})})),Object(c.r)(s.setCurrrentRequest,(function(e,t){return Object.assign(Object.assign({},e),{currentRequestId:t.currentRequestId,error:"",isDirty:!1})})),Object(c.r)(s.clearCurrrentRequest,(function(e){return Object.assign(Object.assign({},e),{currentRequestId:null,error:"",isDirty:!1})})),Object(c.r)(s.initCurrentRequest,(function(e){return Object.assign(Object.assign({},e),{currentRequestId:0,error:"",isDirty:!1})})),Object(c.r)(n.loadRequestSuccess,(function(e,t){return Object.assign(Object.assign({},e),{error:"",currentRequestId:0,requests:t.requests})})),Object(c.r)(n.loadRequestFailure,(function(e,t){return Object.assign(Object.assign({},e),{error:t.error,currentRequestId:0})})),Object(c.r)(s.setCurrrentRequest,(function(e,t){return Object.assign(Object.assign({},e),{currentRequestId:t.currentRequestId})})),Object(c.r)(n.updateRequestSuccess,(function(e,t){var r=e.requests.map((function(e){return e.id===t.request.id?t.request:e}));return Object.assign(Object.assign({},e),{error:"",currentRequestId:0,requests:r})})),Object(c.r)(n.updateRequestFailure,(function(e,t){return Object.assign(Object.assign({},e),{error:t.error,currentRequestId:0})})),Object(c.r)(n.createRequestSuccess,(function(e,t){var r=Object.assign([],e.requests);return r.unshift(t.request[0]),Object.assign(Object.assign({},e),{error:"",currentRequestId:0,requests:r})})),Object(c.r)(n.createRequestFailure,(function(e,t){return Object.assign(Object.assign({},e),{error:t.error,currentRequestId:0})})),Object(c.r)(n.deleteRequestSuccess,(function(e,t){var r=e.requests.filter((function(e){return e.id!==t.request[0].id}));return Object.assign(Object.assign({},e),{error:"",currentRequestId:0,requests:r})})),Object(c.r)(n.deleteRequestFailure,(function(e,t){return Object.assign(Object.assign({},e),{error:t.error,currentRequestId:0})})),Object(c.r)(n.acceptRequestSuccess,(function(e,t){var r=e.requests.map((function(e){return e.id===t.request[0].id?t.request[0]:e}));return Object.assign(Object.assign({},e),{error:"",currentRequestId:0,requests:r})})),Object(c.r)(n.acceptRequestFailure,(function(e,t){return Object.assign(Object.assign({},e),{error:t.error,currentRequestId:0})})),Object(c.r)(s.setDirty,(function(e,t){return Object.assign(Object.assign({},e),{isDirty:t.isDirty})}))),Ie=[{path:"",component:je},{path:":id",component:X}],Ce=((ve=_createClass((function e(){_classCallCheck(this,e)}))).\u0275mod=U.Hb({type:ve}),ve.\u0275inj=U.Gb({factory:function(e){return new(e||ve)},imports:[[a.a,i.e.forChild(Ie),c.j.forFeature("requests",Pe),u.b.forFeature([Le])]]}),ve)}}]);