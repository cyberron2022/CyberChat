(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"1h0P":function(e,t,s){"use strict";s.r(t),s.d(t,"MessageModule",(function(){return Oe}));var r={};s.r(r),s.d(r,"loadAcceptedMessageSuccess",(function(){return y})),s.d(r,"loadAcceptedMessageFailure",(function(){return M})),s.d(r,"loadMessagesSuccess",(function(){return v})),s.d(r,"loadMessagesFailure",(function(){return O})),s.d(r,"sendMessageSuccess",(function(){return S})),s.d(r,"sendMessageFailure",(function(){return j})),s.d(r,"updateMessageSuccess",(function(){return _})),s.d(r,"updateMessageFailure",(function(){return w})),s.d(r,"createMessageSuccess",(function(){return E})),s.d(r,"createMessageFailure",(function(){return x})),s.d(r,"deleteMessageSuccess",(function(){return I})),s.d(r,"deleteMessageFailure",(function(){return L})),s.d(r,"acceptMessageSuccess",(function(){return P})),s.d(r,"acceptMessageFailure",(function(){return T}));var n={};s.r(n),s.d(n,"loadAcceptedMessage",(function(){return F})),s.d(n,"setCurrrentRequest",(function(){return A})),s.d(n,"loadMessages",(function(){return k})),s.d(n,"sendMessage",(function(){return q})),s.d(n,"clearCurrrentRequest",(function(){return U})),s.d(n,"initCurrentMessage",(function(){return C})),s.d(n,"setDirty",(function(){return D})),s.d(n,"updateMessage",(function(){return R})),s.d(n,"createMessage",(function(){return $})),s.d(n,"deleteMessage",(function(){return z})),s.d(n,"acceptMessage",(function(){return H}));var o=s("iInd"),i=s("Yml6"),c=s("DQLy"),a=s("PCNd"),u=s("HDdC"),b=s("ds6q"),l=s("lJxs"),d=s("8Y7J");let p=(()=>{class e{constructor(){this.messages=this.connect("wss://coral-automatic-petalite.glitch.me").pipe(Object(l.a)(e=>JSON.parse(e.data)))}connect(e){return this.subject||(this.subject=this.create(e),console.log("Successfully connected: "+e)),this.subject}create(e){let t=new WebSocket(e),s=new u.a(e=>(t.onmessage=e.next.bind(e),t.onerror=e.error.bind(e),t.onclose=e.complete.bind(e),t.close.bind(t)));return new b.AnonymousSubject({error:null,complete:null,next:e=>{console.log("Message sent to websocket: ",e),t.readyState===WebSocket.OPEN&&t.send(JSON.stringify(e))}},s)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=d.Fb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const h=Object(c.o)("messages"),g=Object(c.q)(h,e=>e.currentRequestId),f=(Object(c.q)(h,g,(e,t)=>t?e.messages.find(e=>e.id===t):null),Object(c.q)(h,e=>e.messages)),m=Object(c.q)(h,e=>e.acceptedMessages),y=(Object(c.q)(h,e=>e.error),Object(c.n)("[Message List API] Load Accepted Message Success",Object(c.s)())),M=Object(c.n)("[Message List API] Load Accepted Message Fail",Object(c.s)()),v=Object(c.n)("[Message Chat API] Load Messages Success",Object(c.s)()),O=Object(c.n)("[Message Chat API] Load Messages Fail",Object(c.s)()),S=Object(c.n)("[Message Chat API] Save Messages Success",Object(c.s)()),j=Object(c.n)("[Message Chat API] Save Messages Fail",Object(c.s)()),_=Object(c.n)("[Message Edit API] Update Message Success",Object(c.s)()),w=Object(c.n)("[Message Edit API] Update Message Fail",Object(c.s)()),E=Object(c.n)("[Message New API] Create Message Success",Object(c.s)()),x=Object(c.n)("[Message New API] Create Message Fail",Object(c.s)()),I=Object(c.n)("[Message List API] Delete Message Success",Object(c.s)()),L=Object(c.n)("[Message List API] Delete Message Fail",Object(c.s)()),P=Object(c.n)("[Message List API] Accept Message Success",Object(c.s)()),T=Object(c.n)("[Message List API] Accept Message Fail",Object(c.s)()),F=Object(c.n)("[Message List Page] Load Accepted Message"),A=Object(c.n)("[Message List Page] Set Current Request",Object(c.s)()),k=Object(c.n)("[Message Chat Page] Load Messages",Object(c.s)()),q=Object(c.n)("[Message Chat Page] Send Messages",Object(c.s)()),U=Object(c.n)("[Message Edit Page] Clear Current Request"),C=Object(c.n)("[Message List Page] Initialize Current Message"),D=Object(c.n)("[Product Edit Page] Set Product Dirty",Object(c.s)()),R=Object(c.n)("[Message Edit Page] Update Message",Object(c.s)()),$=Object(c.n)("[Message New Page] Create Message",Object(c.s)()),z=Object(c.n)("[Message List Page] Delete Message",Object(c.s)()),H=Object(c.n)("[Message List Page] Accept Message",Object(c.s)());var B=s("lGQG"),N=s("z6cu"),J=s("JIr8"),G=s("IheW");let W=(()=>{class e{constructor(e,t){this.http=e,this.authService=t,this.requestUrl="https://cyberron.somee.com/api/message"}ngOnInit(){}getAcceptedMessage(){return this.http.post(this.requestUrl+"/allacceptedrequest",{token:this.authService.appToken,userId:this.authService.currentUserId,userType:this.authService.userType}).pipe(Object(J.a)(this.handleError))}getMessages(e){return this.http.post(this.requestUrl+"/getmessages",{userType:this.authService.userType,requestId:e,token:this.authService.appToken,userId:this.authService.currentUserId}).pipe(Object(J.a)(this.handleError))}savingMessage(e){return this.http.post(this.requestUrl+"/savemessage",{requestId:e.request_id,userId:this.authService.currentUserId,userType:this.authService.userType,message:e.message,token:this.authService.appToken}).pipe(Object(J.a)(this.handleError))}handleError(e){let t;return t=e.error instanceof ErrorEvent?"An error occurred: "+e.error.message:`Backend returned code ${e.status}: ${e.body.error}`,console.error(e),Object(N.a)(t)}}return e.\u0275fac=function(t){return new(t||e)(d.Qb(G.a),d.Qb(B.a))},e.\u0275prov=d.Fb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var V=s("SVse");const Y=function(e){return{active:e}};function Q(e,t){if(1&e){const e=d.Nb();d.Mb(0,"li",7),d.Ub("click",(function(){d.fc(e);const s=t.$implicit,r=t.index;return d.Wb().openMessage(s.request_id,r)})),d.Mb(1,"div",8),d.Mb(2,"div",9),d.Kb(3,"div",10),d.kc(4),d.Lb(),d.kc(5),d.Kb(6,"br"),d.kc(7),d.Lb(),d.Mb(8,"span",11),d.kc(9,"23"),d.Lb(),d.Lb()}if(2&e){const e=t.$implicit,s=t.index,r=d.Wb();d.ac("ngClass",d.bc(4,Y,r.selectedItem===s)),d.zb(4),d.mc(" Client: ",e.client_username,""),d.zb(1),d.mc(" Title: ",e.title,""),d.zb(2),d.mc(" Last Message: ",e.message," ")}}let X=(()=>{class e{constructor(){this.openMessageEmit=new d.n,this.selectedItem=-1}ngOnInit(){}openMessage(e,t){this.selectedItem=t,this.openMessageEmit.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d.Db({type:e,selectors:[["cc-message-list"]],inputs:{acceptedMessage:"acceptedMessage",userType:"userType",errorMessage:"errorMessage",selectedMesssage:"selectedMesssage"},outputs:{openMessageEmit:"openMessageEmit"},decls:10,vars:1,consts:[[1,"card"],[1,"card-header"],[1,"card-body",2,"height","40rem"],[1,"row"],[1,"col-md-12"],[1,"list-group"],["class","list-group-item d-flex justify-content-between align-items-start",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"list-group-item","d-flex","justify-content-between","align-items-start",3,"ngClass","click"],[1,"ms-2","me-auto"],[1,"fw-bold"],[1,"bold"],[1,"badge","bg-info","rounded-pill"]],template:function(e,t){1&e&&(d.Mb(0,"div"),d.Mb(1,"div",0),d.Mb(2,"div",1),d.Mb(3,"h4"),d.kc(4,"Accepted Request"),d.Lb(),d.Lb(),d.Mb(5,"div",2),d.Mb(6,"div",3),d.Mb(7,"div",4),d.Mb(8,"ul",5),d.ic(9,Q,10,6,"li",6),d.Lb(),d.Lb(),d.Lb(),d.Lb(),d.Lb(),d.Lb()),2&e&&(d.zb(9),d.ac("ngForOf",t.acceptedMessage))},directives:[V.k,V.j],styles:["li[_ngcontent-%COMP%]{font-size:14px;cursor:pointer;text-decoration:none;color:#000;padding:8px}.active[_ngcontent-%COMP%], li[_ngcontent-%COMP%]:hover{color:#000;background-color:#90c2f0}.list-group[_ngcontent-%COMP%]{max-height:597px;margin-bottom:10px;overflow-y:auto;-webkit-overflow-scrolling:touch}"]}),e})();var K=s("s7LF"),Z=s("XNiG"),ee=s("QEVK"),te=s("2Vo4"),se=s("DH7j"),re=s("n6bG"),ne=s("1G5W"),oe=s("Kj3r");let ie=(()=>{class e{constructor(e){this.self=e,this.stayAtBottom=!0,this.scrollNow=new Z.a,this.amScrolledToBottom=new u.a,this.destroy$=new Z.a,this.mutations=new te.a(null),this._userScrolledUp=new te.a(!1)}ngOnChanges(){!0===this.stayAtBottom&&this.scrollToBottom()}ngAfterViewInit(){this.registerScrollHandlers()}ngOnDestroy(){this.destroy$.next(),null!=this.changes&&this.changes.disconnect()}registerScrollHandlers(){this.amScrolledToBottom=this._userScrolledUp.pipe(Object(ne.a)(this.destroy$),Object(l.a)(e=>!e)),new MutationObserver(()=>this.mutations.next(null)).observe(this.self.nativeElement,{attributes:!0,childList:!0,characterData:!0}),this.scrollEvent=function e(t,s,r,n){return Object(re.a)(r)&&(n=r,r=void 0),n?e(t,s,r).pipe(Object(l.a)(e=>Object(se.a)(e)?n(...e):n(e))):new u.a(e=>{!function e(t,s,r,n,o){let i;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(t)){const e=t;t.addEventListener(s,r,o),i=()=>e.removeEventListener(s,r,o)}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(t)){const e=t;t.on(s,r),i=()=>e.off(s,r)}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(t)){const e=t;t.addListener(s,r),i=()=>e.removeListener(s,r)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let i=0,c=t.length;i<c;i++)e(t[i],s,r,n,o)}n.add(i)}(t,s,(function(t){e.next(arguments.length>1?Array.prototype.slice.call(arguments):t)}),e,r)})}(this.self.nativeElement,"scroll").pipe(Object(ne.a)(this.destroy$),Object(oe.a)(100)),this.scrollNow.pipe(Object(ne.a)(this.destroy$)).subscribe(e=>{this.scrollToBottom()}),this.mutations.pipe(Object(ne.a)(this.destroy$)).subscribe(e=>{!1===this._userScrolledUp.value&&this.scrollToBottom()}),this.scrollEvent.pipe(Object(ne.a)(this.destroy$)).subscribe(e=>{this.setHasUserScrolledUp()})}setHasUserScrolledUp(){const e=this.self.nativeElement;e.scrollHeight===e.clientHeight+e.scrollTop!=1?!0!==this._userScrolledUp.value&&setTimeout(()=>{e.scrollHeight===e.clientHeight+e.scrollTop==0&&this._userScrolledUp.next(!0)},5):this._userScrolledUp.next(!1)}scrollToBottom(){setTimeout(()=>this.self.nativeElement.scrollTo({left:0,top:this.self.nativeElement.scrollHeight,behavior:"smooth"}),0)}}return e.\u0275fac=function(t){return new(t||e)(d.Jb(d.l))},e.\u0275dir=d.Eb({type:e,selectors:[["","appScrollToBottom",""]],inputs:{stayAtBottom:"stayAtBottom",scrollNow:["scrollNow$s","scrollNow"]},outputs:{amScrolledToBottom:"amScrolledToBottom"},features:[d.xb]}),e})();const ce=["autoFocus"],ae=function(e,t){return{"text-right":e,"text-left":t}},ue=function(e,t){return{darker:e,light:t}};function be(e,t){if(1&e&&(d.Mb(0,"div"),d.Mb(1,"div",15),d.kc(2),d.Lb(),d.Mb(3,"div",16),d.Mb(4,"p",17),d.kc(5),d.Lb(),d.Mb(6,"span",18),d.kc(7),d.Lb(),d.Lb(),d.Lb()),2&e){const e=t.$implicit,s=d.Wb();d.zb(1),d.ac("ngClass",d.cc(5,ae,s.currentUserId===e.created_by_id,s.currentUserId!==e.created_by_id)),d.zb(1),d.lc(e.created_fullname),d.zb(1),d.ac("ngClass",d.cc(8,ue,s.currentUserId===e.created_by_id,s.currentUserId!==e.created_by_id)),d.zb(2),d.lc(e.message),d.zb(2),d.lc(e.created_date)}}function le(e,t){if(1&e&&(d.Mb(0,"span",19),d.kc(1),d.Lb()),2&e){const e=d.Wb();d.zb(1),d.mc(" ",e.displayMessage.message," ")}}const de=function(e){return{"is-invalid":e}};let pe=(()=>{class e{constructor(e,t){this.socketService=e,this.fb=t,this.sendMessageEmit=new d.n,this.messageElementEmit=new d.n,this.reloadMessageEmit=new d.n,this.displayMessage={},this.scrollNow=new Z.a,this.validationMessages={message:{required:"Message is required.",minlength:"Message must be at least three characters.",maxlength:"Message cannot exceed 5000 characters."}},this.genericValidator=new ee.a(this.validationMessages)}ngOnInit(){this.messageForm=this.fb.group({message:["",[K.m.required,K.m.minLength(3),K.m.maxLength(5e3)]]}),this.messageForm.valueChanges.subscribe(()=>this.displayMessage=this.genericValidator.processMessages(this.messageForm)),this.socketService.messages.subscribe(e=>{const t=Object.assign({},e);this.currentUserId!==t.user_id&&this.requestId===t.request_id&&this.reloadMessageEmit.emit(t.request_id),console.log("Response from websocket: "+JSON.stringify(t)),this.scrollNow.next(!0)})}ngOnDestroy(){}ngAfterViewChecked(){null!==this.messages&&this.autoFocus.nativeElement.focus()}displayUpdatedMessage(e){}blur(){this.displayMessage=this.genericValidator.processMessages(this.messageForm)}sendMessage(){this.sendMessageEmit.emit(this.messageForm.get("message").value);let e={user_id:this.currentUserId,request_id:this.requestId,message:this.messageForm.get("message").value};this.socketService.messages.next(e),this.messageForm.reset(),this.scrollNow.next(!0),this.autoFocus.nativeElement.focus()}}return e.\u0275fac=function(t){return new(t||e)(d.Jb(p),d.Jb(K.b))},e.\u0275cmp=d.Db({type:e,selectors:[["cc-message-chat"]],viewQuery:function(e,t){var s;1&e&&d.nc(ce,!0),2&e&&d.dc(s=d.Vb())&&(t.autoFocus=s.first)},inputs:{messages:"messages",userType:"userType",requestId:"requestId",currentUserId:"currentUserId",errorMessage:"errorMessage"},outputs:{sendMessageEmit:"sendMessageEmit",messageElementEmit:"messageElementEmit",reloadMessageEmit:"reloadMessageEmit"},decls:22,vars:10,consts:[[1,"card"],[1,"card-header"],["appScrollToBottom","","cdkScrollable","",1,"card-body",2,"height","28rem",3,"scrollNow$s","stayAtBottom"],["myList",""],[4,"ngFor","ngForOf"],[1,"card-footer"],["novalidate","",3,"formGroup","ngSubmit"],[1,"row","g-3","align-items-center"],[1,"col-auto"],["for","inputMessage",1,"col-form-label"],["id","sendMessageId","placeholder","Type your message here...","rows","3","cols","80","formControlName","message",1,"form-control",3,"ngClass"],["autoFocus",""],["class","invalid-feedback",4,"ngIf"],[1,"col-auto","mt-2"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"fullname",3,"ngClass"],[1,"msg-container",3,"ngClass"],[1,"msg"],[1,"time-message"],[1,"invalid-feedback"]],template:function(e,t){1&e&&(d.Mb(0,"div"),d.Mb(1,"div",0),d.Mb(2,"div",1),d.Mb(3,"h4"),d.kc(4,"Message"),d.Lb(),d.Lb(),d.Mb(5,"div",2,3),d.ic(7,be,8,11,"div",4),d.Lb(),d.Mb(8,"div",5),d.Mb(9,"form",6),d.Ub("ngSubmit",(function(){return t.sendMessage()})),d.Mb(10,"div",7),d.Mb(11,"div",8),d.Mb(12,"label",9),d.kc(13,"Message"),d.Lb(),d.Lb(),d.Mb(14,"div",8),d.Mb(15,"textarea",10,11),d.kc(17,"                "),d.Lb(),d.ic(18,le,2,1,"span",12),d.Lb(),d.Mb(19,"div",13),d.Mb(20,"button",14),d.kc(21,"Send"),d.Lb(),d.Lb(),d.Lb(),d.Lb(),d.Lb(),d.Lb(),d.Lb()),2&e&&(d.zb(5),d.ac("scrollNow$s",t.scrollNow)("stayAtBottom",!0),d.zb(2),d.ac("ngForOf",t.messages),d.zb(2),d.ac("formGroup",t.messageForm),d.zb(6),d.ac("ngClass",d.bc(8,de,t.displayMessage.message)),d.Ab("disabled",null===t.messages?"disabled":null),d.zb(3),d.ac("ngIf",t.displayMessage.message),d.zb(2),d.ac("disabled",!t.messageForm.valid||!t.messageForm.dirty&&t.messages))},directives:[ie,V.k,K.n,K.h,K.e,K.a,K.g,K.c,V.j,V.l],styles:['.card-body[_ngcontent-%COMP%]{max-height:597px;margin-bottom:10px;overflow-y:auto;-webkit-overflow-scrolling:touch}.message[_ngcontent-%COMP%]{padding:10px}.msg-container[_ngcontent-%COMP%]{border:2px solid #dedede;border-radius:5px;padding:10px;margin:10px 0}.light[_ngcontent-%COMP%]{background-color:#f1f1f1;margin-right:80px}.darker[_ngcontent-%COMP%]{border-color:#ccc;background-color:#ddd;margin-left:80px}.msg-container[_ngcontent-%COMP%]:after{content:"";clear:both;display:table}.fullname[_ngcontent-%COMP%], .msg[_ngcontent-%COMP%]{font-size:14px}.time-message[_ngcontent-%COMP%]{font-size:10px}textarea[_ngcontent-%COMP%]{resize:none}']}),e})(),he=(()=>{class e{constructor(e,t,s,r){this.store=e,this.router=t,this.auth=s,this.messageService=r,this.pageTitle="Chat Box"}ngOnInit(){this.userType=this.auth.userType,this.currentUserId=this.auth.currentUserId,this.store.dispatch(n.loadAcceptedMessage()),this.acceptedMessage$=this.store.select(m)}openMessage(e){this.requestId=e,this.store.dispatch(n.setCurrrentRequest({currentRequestId:e})),this.store.dispatch(n.loadMessages({request_id:e})),this.messages$=this.store.select(f)}reloadMessage(e){this.store.dispatch(n.loadMessages({request_id:e})),this.messages$=this.store.select(f)}sendMessage(e){this.store.dispatch(n.sendMessage({request_id:this.requestId,message:e}))}}return e.\u0275fac=function(t){return new(t||e)(d.Jb(c.h),d.Jb(o.b),d.Jb(B.a),d.Jb(W))},e.\u0275cmp=d.Db({type:e,selectors:[["ng-component"]],decls:10,vars:19,consts:[[1,"row"],[1,"col-md-5"],[3,"acceptedMessage","userType","selectedMesssage","errorMessage","openMessageEmit"],[1,"col-md-7"],[3,"messages","userType","requestId","currentUserId","errorMessage","sendMessageEmit","reloadMessageEmit"]],template:function(e,t){1&e&&(d.Mb(0,"div",0),d.Mb(1,"div",1),d.Mb(2,"cc-message-list",2),d.Ub("openMessageEmit",(function(e){return t.openMessage(e)})),d.Xb(3,"async"),d.Xb(4,"async"),d.Xb(5,"async"),d.Lb(),d.Lb(),d.Mb(6,"div",3),d.Mb(7,"cc-message-chat",4),d.Ub("sendMessageEmit",(function(e){return t.sendMessage(e)}))("reloadMessageEmit",(function(e){return t.reloadMessage(e)})),d.Xb(8,"async"),d.Xb(9,"async"),d.Lb(),d.Lb(),d.Lb()),2&e&&(d.zb(2),d.ac("acceptedMessage",d.Yb(3,9,t.acceptedMessage$))("userType",t.userType)("selectedMesssage",d.Yb(4,11,t.selectedMesssage$))("errorMessage",d.Yb(5,13,t.errorMessage$)),d.zb(5),d.ac("messages",d.Yb(8,15,t.messages$))("userType",t.userType)("requestId",t.requestId)("currentUserId",t.currentUserId)("errorMessage",d.Yb(9,17,t.errorMessage$)))},directives:[X,pe],pipes:[V.b],encapsulation:2}),e})();var ge=s("LRne"),fe=s("5+tZ"),me=s("bOdf");let ye=(()=>{class e{constructor(e,t){this.actions$=e,this.messageService=t,this.loadAcceptedMessage$=Object(i.c)(()=>this.actions$.pipe(Object(i.d)(n.loadAcceptedMessage),Object(fe.a)(()=>this.messageService.getAcceptedMessage().pipe(Object(l.a)(e=>r.loadAcceptedMessageSuccess({acceptedMessages:e})),Object(J.a)(e=>Object(ge.a)(r.loadAcceptedMessageFailure({error:e}))))))),this.loadMessages$=Object(i.c)(()=>this.actions$.pipe(Object(i.d)(n.loadMessages),Object(fe.a)(e=>this.messageService.getMessages(e.request_id).pipe(Object(l.a)(e=>r.loadMessagesSuccess({messages:e})),Object(J.a)(e=>Object(ge.a)(r.loadMessagesFailure({error:e}))))))),this.saveMessages$=Object(i.c)(()=>this.actions$.pipe(Object(i.d)(n.sendMessage),Object(me.a)(e=>this.messageService.savingMessage(e).pipe(Object(l.a)(e=>r.sendMessageSuccess({messages:e})),Object(J.a)(e=>Object(ge.a)(r.sendMessageFailure({error:e})))))))}}return e.\u0275fac=function(t){return new(t||e)(d.Qb(i.a),d.Qb(W))},e.\u0275prov=d.Fb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Me=Object(c.p)({currentRequestId:null,isDirty:!1,error:"",acceptedMessages:[],messages:[]},Object(c.r)(n.setCurrrentRequest,(e,t)=>Object.assign(Object.assign({},e),{currentRequestId:t.currentRequestId,error:"",isDirty:!1})),Object(c.r)(n.clearCurrrentRequest,e=>Object.assign(Object.assign({},e),{currentRequestId:null,error:"",isDirty:!1})),Object(c.r)(n.initCurrentMessage,e=>Object.assign(Object.assign({},e),{currentRequestId:0,error:"",isDirty:!1})),Object(c.r)(r.loadAcceptedMessageSuccess,(e,t)=>Object.assign(Object.assign({},e),{error:"",currentRequestId:0,acceptedMessages:t.acceptedMessages})),Object(c.r)(r.loadAcceptedMessageFailure,(e,t)=>Object.assign(Object.assign({},e),{error:t.error,currentRequestId:0,acceptedMessages:[]})),Object(c.r)(r.loadMessagesSuccess,(e,t)=>Object.assign(Object.assign({},e),{error:"",currentRequestId:0,messages:t.messages})),Object(c.r)(r.loadMessagesFailure,(e,t)=>Object.assign(Object.assign({},e),{error:t.error,currentRequestId:0,messages:[]})),Object(c.r)(r.sendMessageSuccess,(e,t)=>Object.assign(Object.assign({},e),{error:"",currentRequestId:0,messages:t.messages})),Object(c.r)(r.sendMessageFailure,(e,t)=>Object.assign(Object.assign({},e),{error:t.error,currentRequestId:0})),Object(c.r)(n.setDirty,(e,t)=>Object.assign(Object.assign({},e),{isDirty:t.isDirty}))),ve=[{path:"",component:he}];let Oe=(()=>{class e{}return e.\u0275mod=d.Hb({type:e}),e.\u0275inj=d.Gb({factory:function(t){return new(t||e)},providers:[p],imports:[[a.a,o.e.forChild(ve),c.j.forFeature("messages",Me),i.b.forFeature([ye])]]}),e})()},"9AGB":function(e,t,s){"use strict";var r=s("yoF8");function n(e){return 0===e.length?r.identity:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}t.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n(e)},t.pipeFromArray=n},FWf1:function(e,t,s){"use strict";var r=this&&this.__extends||function(){var e=function(t,s){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(t,s)};return function(t,s){function r(){this.constructor=t}e(t,s),t.prototype=null===s?Object.create(s):(r.prototype=s.prototype,new r)}}(),n=s("pshJ"),o=s("GiSu"),i=s("zB/H"),c=s("p//D"),a=s("n3uD"),u=s("MkmW"),b=function(e){function t(s,r,n){var i=e.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=o.empty;break;case 1:if(!s){i.destination=o.empty;break}if("object"==typeof s){s instanceof t?(i.syncErrorThrowable=s.syncErrorThrowable,i.destination=s,s.add(i)):(i.syncErrorThrowable=!0,i.destination=new l(i,s));break}default:i.syncErrorThrowable=!0,i.destination=new l(i,s,r,n)}return i}return r(t,e),t.prototype[c.rxSubscriber]=function(){return this},t.create=function(e,s,r){var n=new t(e,s,r);return n.syncErrorThrowable=!1,n},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(i.Subscription);t.Subscriber=b;var l=function(e){function t(t,s,r,i){var c,a=e.call(this)||this;a._parentSubscriber=t;var u=a;return n.isFunction(s)?c=s:s&&(c=s.next,r=s.error,i=s.complete,s!==o.empty&&(u=Object.create(s),n.isFunction(u.unsubscribe)&&a.add(u.unsubscribe.bind(u)),u.unsubscribe=a.unsubscribe.bind(a))),a._context=u,a._next=c,a._error=r,a._complete=i,a}return r(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;a.config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,s=a.config.useDeprecatedSynchronousErrorHandling;if(this._error)s&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)s?(t.syncErrorValue=e,t.syncErrorThrown=!0):u.hostReportError(e),this.unsubscribe();else{if(this.unsubscribe(),s)throw e;u.hostReportError(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var s=function(){return e._complete.call(e._context)};a.config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,s),this.unsubscribe()):(this.__tryOrUnsub(s),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(s){if(this.unsubscribe(),a.config.useDeprecatedSynchronousErrorHandling)throw s;u.hostReportError(s)}},t.prototype.__tryOrSetError=function(e,t,s){if(!a.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,s)}catch(r){return a.config.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(u.hostReportError(r),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(b);t.SafeSubscriber=l},FiyT:function(e,t,s){"use strict";var r=this&&this.__extends||function(){var e=function(t,s){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(t,s)};return function(t,s){function r(){this.constructor=t}e(t,s),t.prototype=null===s?Object.create(s):(r.prototype=s.prototype,new r)}}();t.SubjectSubscription=function(e){function t(t,s){var r=e.call(this)||this;return r.subject=t,r.subscriber=s,r.closed=!1,r}return r(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var s=t.indexOf(this.subscriber);-1!==s&&t.splice(s,1)}}},t}(s("zB/H").Subscription)},GMZp:function(e,t,s){"use strict";t.isObject=function(e){return null!==e&&"object"==typeof e}},GiSu:function(e,t,s){"use strict";var r=s("n3uD"),n=s("MkmW");t.empty={closed:!0,next:function(e){},error:function(e){if(r.config.useDeprecatedSynchronousErrorHandling)throw e;n.hostReportError(e)},complete:function(){}}},LBXl:function(e,t,s){"use strict";t.UnsubscriptionError=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}()},MkmW:function(e,t,s){"use strict";t.hostReportError=function(e){setTimeout((function(){throw e}),0)}},Mxlh:function(e,t,s){"use strict";t.ObjectUnsubscribedError=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}()},Q1FS:function(e,t,s){"use strict";var r=s("yx2s"),n=s("Xwq/"),o=s("zfKp"),i=s("9AGB"),c=s("n3uD");function a(e){if(e||(e=c.config.Promise||Promise),!e)throw new Error("no Promise impl found");return e}t.Observable=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var s=new e;return s.source=this,s.operator=t,s},e.prototype.subscribe=function(e,t,s){var r=this.operator,o=n.toSubscriber(e,t,s);if(o.add(r?r.call(o,this.source):this.source||c.config.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),c.config.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){c.config.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),r.canReportError(e)?e.error(t):console.warn(t)}},e.prototype.forEach=function(e,t){var s=this;return new(t=a(t))((function(t,r){var n;n=s.subscribe((function(t){try{e(t)}catch(s){r(s),n&&n.unsubscribe()}}),r,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[o.observable]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:i.pipeFromArray(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=a(e))((function(e,s){var r;t.subscribe((function(e){return r=e}),(function(e){return s(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}()},"Xwq/":function(e,t,s){"use strict";var r=s("FWf1"),n=s("p//D"),o=s("GiSu");t.toSubscriber=function(e,t,s){if(e){if(e instanceof r.Subscriber)return e;if(e[n.rxSubscriber])return e[n.rxSubscriber]()}return e||t||s?new r.Subscriber(e,t,s):new r.Subscriber(o.empty)}},ds6q:function(e,t,s){"use strict";var r=this&&this.__extends||function(){var e=function(t,s){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(t,s)};return function(t,s){function r(){this.constructor=t}e(t,s),t.prototype=null===s?Object.create(s):(r.prototype=s.prototype,new r)}}(),n=s("Q1FS"),o=s("FWf1"),i=s("zB/H"),c=s("Mxlh"),a=s("FiyT"),u=s("p//D"),b=function(e){function t(t){var s=e.call(this,t)||this;return s.destination=t,s}return r(t,e),t}(o.Subscriber);t.SubjectSubscriber=b;var l=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return r(t,e),t.prototype[u.rxSubscriber]=function(){return new b(this)},t.prototype.lift=function(e){var t=new d(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new c.ObjectUnsubscribedError;if(!this.isStopped)for(var t=this.observers,s=t.length,r=t.slice(),n=0;n<s;n++)r[n].next(e)},t.prototype.error=function(e){if(this.closed)throw new c.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,s=t.length,r=t.slice(),n=0;n<s;n++)r[n].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new c.ObjectUnsubscribedError;this.isStopped=!0;for(var e=this.observers,t=e.length,s=e.slice(),r=0;r<t;r++)s[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new c.ObjectUnsubscribedError;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new c.ObjectUnsubscribedError;return this.hasError?(e.error(this.thrownError),i.Subscription.EMPTY):this.isStopped?(e.complete(),i.Subscription.EMPTY):(this.observers.push(e),new a.SubjectSubscription(this,e))},t.prototype.asObservable=function(){var e=new n.Observable;return e.source=this,e},t.create=function(e,t){return new d(e,t)},t}(n.Observable);t.Subject=l;var d=function(e){function t(t,s){var r=e.call(this)||this;return r.destination=t,r.source=s,r}return r(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):i.Subscription.EMPTY},t}(l);t.AnonymousSubject=d},mbIT:function(e,t,s){"use strict";t.isArray=function(){return Array.isArray||function(e){return e&&"number"==typeof e.length}}()},n3uD:function(e,t,s){"use strict";var r=!1;t.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},"p//D":function(e,t,s){"use strict";t.rxSubscriber=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),t.$$rxSubscriber=t.rxSubscriber},pshJ:function(e,t,s){"use strict";t.isFunction=function(e){return"function"==typeof e}},yoF8:function(e,t,s){"use strict";t.identity=function(e){return e}},yx2s:function(e,t,s){"use strict";var r=s("FWf1");t.canReportError=function(e){for(;e;){var t=e.destination;if(e.closed||e.isStopped)return!1;e=t&&t instanceof r.Subscriber?t:null}return!0}},"zB/H":function(e,t,s){"use strict";var r=s("mbIT"),n=s("GMZp"),o=s("pshJ"),i=s("LBXl");function c(e){return e.reduce((function(e,t){return e.concat(t instanceof i.UnsubscriptionError?t.errors:t)}),[])}t.Subscription=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}var t;return e.prototype.unsubscribe=function(){var t;if(!this.closed){var s=this._parentOrParents,a=this._unsubscribe,u=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,s instanceof e)s.remove(this);else if(null!==s)for(var b=0;b<s.length;++b)s[b].remove(this);if(o.isFunction(a))try{a.call(this)}catch(p){t=p instanceof i.UnsubscriptionError?c(p.errors):[p]}if(r.isArray(u)){b=-1;for(var l=u.length;++b<l;){var d=u[b];if(n.isObject(d))try{d.unsubscribe()}catch(p){t=t||[],p instanceof i.UnsubscriptionError?t=t.concat(c(p.errors)):t.push(p)}}}if(t)throw new i.UnsubscriptionError(t)}},e.prototype.add=function(t){var s=t;if(!t)return e.EMPTY;switch(typeof t){case"function":s=new e(t);case"object":if(s===this||s.closed||"function"!=typeof s.unsubscribe)return s;if(this.closed)return s.unsubscribe(),s;if(!(s instanceof e)){var r=s;(s=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var n=s._parentOrParents;if(null===n)s._parentOrParents=this;else if(n instanceof e){if(n===this)return s;s._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return s;n.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[s]:o.push(s),s},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var s=t.indexOf(e);-1!==s&&t.splice(s,1)}},e.EMPTY=((t=new e).closed=!0,t),e}()},zfKp:function(e,t,s){"use strict";t.observable=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}()}}]);